<div class="y-center justify-between mb-10 header">
  <span class="f-16" tr="api-response">响应体</span>

  <!-- <mat-form-field>
    <mat-select
      [(value)]="produce"
      (selectionChange)="handleSelectChange($event)"
    >
      <mat-option *ngFor="let produce of produces" [value]="produce">
        {{ produce }}
      </mat-option>
    </mat-select>
  </mat-form-field> -->
</div>

<div class="flex-1 border">
  <table class="f-14">
    <thead>
      <tr class="no-hover">
        <th class="pa-8 text-left" style="width: 20%" tr="api-response-code">
          响应码
        </th>

        <th class="pa-8 text-left" tr="api-response-result">结果</th>

        <th class="pa-8 text-left" style="width: 30%" tr="description">描述</th>
      </tr>
    </thead>

    <tbody class="code">
      <tr class="no-hover">
        <td colspan="3">
          <mat-divider></mat-divider>
        </td>
      </tr>

      <ng-container
        *ngFor="let response of responses | keyvalue; let last = last"
      >
        <tr class="response-item">
          <td class="pa-8">
            <div class="response-key">{{ response.key }}</div>
          </td>

          <td class="pa-8">
            <app-api-type [parameter]="response.value"></app-api-type>
          </td>

          <td class="pa-8">
            <div class="description">{{ response.value.description }}</div>
          </td>
        </tr>

        <ng-container *ngIf="response.value.headers">
          <tr class="no-hover">
            <td colspan="3">
              <mat-divider></mat-divider>
            </td>
          </tr>

          <tr class="no-hover" [class]="'header' + response['key']">
            <td colspan="3" class="px-16">
              <table class="response-headers" style="border: 0">
                <thead>
                  <tr class="no-hover">
                    <th class="pa-8 text-left" tr="api-response-header">
                      响应头
                    </th>

                    <th class="pa-8 text-left" tr="description">描述</th>

                    <th class="pa-8 text-left" tr="type">类型</th>
                  </tr>
                </thead>

                <tbody>
                  <ng-container
                    *ngFor="let header of response.value.headers | keyvalue"
                  >
                    <tr class="no-hover">
                      <td colspan="3">
                        <mat-divider></mat-divider>
                      </td>
                    </tr>

                    <tr class="response-header-item">
                      <td class="pa-8" style="min-width: 150px">
                        <div class="header-key">{{ header.key }}</div>
                      </td>

                      <td class="pa-8">
                        <div class="header-description">
                          {{ header.value.description }}
                        </div>
                      </td>

                      <td class="pa-8">
                        <div class="header-type">
                          {{ types[header.value.type] }}
                        </div>
                      </td>
                    </tr>
                  </ng-container>
                </tbody>
              </table>
            </td>
          </tr>
        </ng-container>

        <tr class="no-hover" *ngIf="!last">
          <td colspan="3">
            <mat-divider></mat-divider>
          </td>
        </tr>
      </ng-container>

      <tr class="no-data" *ngIf="responsesEmpty">
        <td class="pa-8 text-center text--disabled" colspan="3" tr="no-data">
          暂无数据
        </td>
      </tr>
    </tbody>
  </table>
</div>
